(function(a){a.fn.formToWizard=function(f){f=a.extend({submitButton:"submit"},f);var c=this;var b=a(c).find("fieldset");var h=b.size();var g="#"+f.submitButton;a(g).hide();a(c).before("<ul id='steps'></ul>");b.each(function(k){a(this).wrap("<div id='step"+k+"'></div>");a(this).append("<p id='step"+k+"commands'></p>");var j=a(this).find("legend").html();a("#steps").append("<li id='stepDesc"+k+"'>Step "+(k+1)+"<span>"+j+"</span></li>");if(k==0){i(k);d(k)}else{if(k==h-1){a("#step"+k).hide();e(k)}else{a("#step"+k).hide();e(k);i(k)}}});function e(j){var k="step"+j;a("#"+k+"commands").append("<a href='#' id='"+k+"Prev' class='prev'>< Back</a>");a("#"+k+"Prev").bind("click",function(l){a("#"+k).hide();a("#step"+(j-1)).show();a(g).hide();d(j-1)})}function i(j){var k="step"+j;a("#"+k+"commands").append("<a href='#' id='"+k+"Next' class='next'>Next ></a>");a("#"+k+"Next").bind("click",function(l){a("#"+k).hide();a("#step"+(j+1)).show();if(j+2==h){a(g).show()}d(j+1)})}function d(j){a("#steps li").removeClass("current");a("#stepDesc"+j).addClass("current")}}})(jQuery);